---
title: "main"
output: pdf_document
date: "2024-07-20"
---


```{r}

library(tidyverse)

# import the csv

series_matrix<- read.csv('./data/QBS103_GSE157103_series_matrix.csv')
genes <- read.csv('./data/QBS103_GSE157103_genes.csv')

```

```{r}
head(series_matrix)
unique(series_matrix$disease_status) # disease status is one categorical 
unique(series_matrix$mechanical_ventilation) # another categorial
```


```{r}

# function to transpose/prepare the data from series_matrix and genes

prepare_dataframe <- function(series_matrix, genes){
  unique(series_matrix$age) # this one is covariate 

  # let's merge these two data sets together 
  
  # transpose the genese dataframe
  transposed_genes <- as.data.frame(t(genes))
  colnames(transposed_genes) <- genes$X
  transposed_genes <- temp_df[2:length(genes), ]
  
  
  for (i in colnames(transposed_genes)){
    series_matrix[[i]] <- as.numeric(transposed_genes[[i]])
  }
  
  return(series_matrix)
}


```

```{r}
library(ggplot2)

# creating a histogram 
# http://www.sthda.com/english/wiki/ggplot2-histogram-plot-quick-start-guide-r-software-and-data-visualization reference 

ggplot(new_df, aes(x = AATK)) + 
  geom_histogram() + 
  theme_classic()

```
```{r}
# creating a scatter point
ggplot(new_df, aes(x = age, y = AATK, color = disease_status)) + 
  geom_point() +
  scale_x_discrete(breaks = seq(0, 100, by = 10))+ 
  xlab('Age (yrs)') + 
  ylab('AATK')
 ```
```{r}

# https://stackoverflow.com/questions/55180015/use-geom-boxplot-with-variable-of-type-double-on-x-axis
# Used this link to plot both box plots 

ggplot(new_df, aes(y = AATK, x = disease_status, fill = sex)) +
  geom_boxplot() +
  labs(x = "Disease Status ", y = "AATK Value")
```


```{r}
a <- function(dataframe, list_of_genes, continuous_variable, categorical_covariates)
  {
  # plot the scatter
  scatter <- ggplot(new_df, aes(x = age, y = AATK, color = disease_status)) + 
  geom_point() +
  scale_x_discrete(breaks = seq(0, 100, by = 10))+ 
  xlab('Age (yrs)') + 
  ylab('AATK')

  # plot the box plot
  box <- ggplot(new_df, aes(y = AATK, x = disease_status, fill = sex)) +
    geom_boxplot() +
    labs(x = "Disease Status ", y = "AATK Value")
  
  # plot the histogram
  histo <- ggplot(new_df, aes(x = AATK)) + 
  geom_histogram() + 
  theme_classic()
  
  return(list(scatter, box, histo))

}


a(new_df)[3]

```


